#!/bin/sh

echo "üîç Running pre-commit checks..."

# Example check: prevent committing if 'TODO' appears in lua files
if grep -R "TODO" --include="*.lua" . > /dev/null; then
    echo "‚ùå Commit blocked: TODO found in Lua code."
    exit 1
fi

# Basic Lua syntax check (no external tools required)
for file in $(git diff --cached --name-only --diff-filter=ACM | grep '.lua$'); do
    echo "Checking Lua syntax: $file"
    lua -p "$file"
    if [ $? -ne 0 ]; then
        echo "‚ùå Lua syntax error in $file ‚Äî commit aborted."
        exit 1
    fi
done

echo "‚úÖ Pre-commit checks passed!"
exit 0
